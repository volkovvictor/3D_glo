(()=>{"use strict";const e=({timing:e,draw:t,duration:o})=>{let r=performance.now();requestAnimationFrame((function n(s){let c=(s-r)/o;c>1&&(c=1);let l=e(c);t(l),c<1&&requestAnimationFrame(n)}))},t=({formId:e,someElem:t=[]})=>{const o=document.getElementById(e),r=document.createElement("div");try{if(!o)throw new Error("Ошибка");o.addEventListener("submit",(e=>{e.preventDefault();const n=o.querySelectorAll("input"),s=new FormData(o),c={};let l=!0;var a;s.forEach(((e,t)=>{c[t]=e})),t.forEach((e=>{const t=document.getElementById(e.id);"block"==e.type&&(c[e.id]=t.textContent),"input"==e.type&&(c[e.id]=t.value)})),n.forEach((e=>{(e=>{e.classList.remove("error"),e.style.border="",""===e.value.trim()&&e.classList.add("error"),"tel"===e.type&&e.value.length<11&&e.classList.add("error"),e.classList.contains("error")&&(e.style.border="1px solid red")})(e),e.classList.contains("error")&&(l=!1)})),l&&(r.textContent="Загрузка...",o.append(r),(a=c,fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(a)}).then((e=>e.json()))).then((e=>{o.reset(),r.textContent="Данные отправлены!"})).catch((e=>{r.textContent="Произошла ошибка"})))}))}catch(e){}};(e=>{const t=document.getElementById("timer-hours"),o=document.getElementById("timer-minutes"),r=document.getElementById("timer-seconds"),n=e=>(e+"").length<2?"0"+e:e,s=()=>{const e=(()=>{const e=(new Date("2023.12.02").getTime()-(new Date).getTime())/1e3;return{timeRemaining:e,hours:Math.floor(e/60/60),minutes:Math.floor(e/60)%60,seconds:Math.floor(e)%60}})();t.textContent=n(e.hours<0?0:e.hours),o.textContent=n(e.minutes<0?0:e.minutes),r.textContent=n(e.seconds<0?0:e.seconds),e.timeRemaining>0&&setInterval(s,1e3)};s()})(),(()=>{const e=document.querySelector("menu");document.body.addEventListener("click",(t=>{t.target.closest("menu")||t.target.closest(".menu")||e.classList.remove("active-menu"),(t.target.matches("menu>ul>li>a")||t.target.classList.contains("close-btn")||t.target.closest(".menu"))&&e.classList.toggle("active-menu")}))})(),(()=>{const t=document.querySelectorAll(".popup-btn"),o=document.querySelector(".popup"),r=(o.querySelector(".popup-close"),o.querySelector(".popup-content"));o.style.opacity="0",r.style.transform="scale(0)",t.forEach((t=>{t.addEventListener("click",(()=>{o.style.display="block",screen.width<768?(o.style.opacity="1",r.style.transform="scale(1)"):e({duration:300,timing:e=>e,draw(e){o.style.opacity=e,r.style.transform=`scale(${e})`}})}))})),o.addEventListener("click",(e=>{e.target.closest(".popup-content")&&!e.target.classList.contains("popup-close")||(o.style.display="none",o.style.opacity="0",r.style.transform="scale(0)")}))})(),(()=>{const e=document.querySelector('a[href="#service-block"]'),t=document.querySelectorAll("menu>ul>li>a"),o=e=>{document.querySelector(e).scrollIntoView({behavior:"smooth",block:"center"})};e.addEventListener("click",(t=>{t.preventDefault(),o(e.getAttribute("href"))})),t.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),o(e.getAttribute("href"))}))}))})(),(()=>{const e=document.querySelector(".calc-block").querySelectorAll('input[type="text"]'),t=document.querySelectorAll("form"),o=e=>{const t=[],o=e.getAttribute("type")||e.getAttribute("name");let r=e.value;if(r=r.replace(/^\-+/gi,"").trim(),r=r.replace(/\-+$/gi,"").trim(),r=r.replace(/\s{2,}/gi," ").trim(),r=r.replace(/\-{2,}/gi,"-").trim(),"email"===o&&(r=r.replace(/[^\@\-\_\.\!\~\*\'\w]/gi,"")),"tel"===o&&(r=r.replace(/[^\-+()\d]/g,"")),"text"===o){if(r=r.replace(/[^а-я\s]/gi,"").trim(),""===r)return r;r.split(" ").forEach((e=>t.push(e[0].toUpperCase()+e.slice(1)))),r=t.join(" ")}if("user_message"===o){if(r=r.replace(/[a-z]/gi,"").trim(),""===r)return r;r.split(" ").forEach((e=>t.push(e[0].toUpperCase()+e.slice(1)))),r=t.join(" ")}return r};e.forEach((e=>{e.addEventListener("blur",(()=>{e.value=e.value.replace(/\D/gi,"")}))})),t.forEach((e=>{const t=e.querySelector('input[name="user_name"]'),r=e.querySelector('input[type="email"]'),n=e.querySelector('input[type="tel"]'),s=e.querySelector('input[name="user_message"]');t.addEventListener("blur",(()=>{t.value=o(t)})),s&&s.addEventListener("blur",(()=>{s.value=o(s)})),r.addEventListener("blur",(()=>{r.value=o(r)})),n.addEventListener("blur",(()=>{n.value=o(n)}))}))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{const r=e.target;if(r.closest(".service-header-tab")){const e=r.closest(".service-header-tab");t.forEach(((t,r)=>{t===e?(t.classList.add("active"),o[r].classList.remove("d-none")):(t.classList.remove("active"),o[r].classList.add("d-none"))}))}}))})(),((e,t,o,r="slide-active",n="active-dot")=>{const s=document.querySelector(e),c=document.querySelectorAll(t),l=document.querySelector(o);if(!s||!l||!c.length)return;let a,i=null,u=0;const d=(e,t,o)=>{e[t].classList.add(o)},m=(e,t,o)=>{e[t].classList.remove(o)},p=()=>{m(c,u,r),m(i,u,n),u++,u>=c.length&&(u=0),d(c,u,r),d(i,u,n)},y=(e=1500)=>{a=setInterval(p,e)};s.addEventListener("click",(e=>{e.preventDefault();const t=e.target;(t.classList.contains("portfolio-btn")||t.classList.contains("dot"))&&(m(c,u,r),m(i,u,n),"arrow-right"===t.id&&u++,"arrow-left"===t.id&&u--,t.classList.contains("dot")&&i.forEach(((e,o)=>{e===t&&(u=o)})),u>=c.length&&(u=0),u<0&&(u=c.length-1),d(c,u,r),d(i,u,n))})),s.addEventListener("mouseover",(e=>{const t=e.target;(t.classList.contains("portfolio-btn")||t.classList.contains("dot"))&&clearInterval(a)})),s.addEventListener("mouseout",(e=>{const t=e.target;(t.classList.contains("portfolio-btn")||t.classList.contains("dot"))&&y(2e3)})),l.innerHTML="",c.forEach(((e,t)=>{const o=document.createElement("li");o.classList.add("dot"),0===t&&o.classList.add(n),l.append(o)})),i=s.querySelectorAll(".dot"),y(2e3)})(".portfolio-content",".portfolio-item",".portfolio-dots","portfolio-item-active","dot-active"),(t=>{const o=document.querySelector(".calc-block"),r=o.querySelector(".calc-type"),n=o.querySelector(".calc-square"),s=o.querySelector(".calc-count"),c=o.querySelector(".calc-day"),l=document.getElementById("total");o.addEventListener("input",(o=>{const a=o.target;a!==r&&a!==n&&a!==s&&a!==c||e({duration:1e3,timing:e=>e,draw(e){const o=(()=>{const e=+r.options[r.selectedIndex].value,o=+n.value;let l=0,a=1,i=1;return a+=s.value>1?s.value/10:0,i=c.value&&c.value<5?2:c.value&&c.value<10?1.5:1,e&&o&&(l=t*e*o*a*i),l})();+l.textContent<o&&(l.textContent=Math.floor(o*e)),+l.textContent>o&&(l.textContent=Math.floor(o*e))}})}))})(100),t({formId:"form1",someElem:[{type:"block",id:"total"}]}),t({formId:"form2",someElem:[{type:"block",id:"total"}]}),t({formId:"form3",someElem:[{type:"block",id:"total"}]})})();